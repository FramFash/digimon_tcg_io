import{c as B,a as v,t as y}from"../chunks/0jAoUWee.js";import"../chunks/BeYzX27F.js";import{p as H,w as b,g as s,s as r,q as I,t as J,o as K,v as P,x as d,y as n,z as q,A as m}from"../chunks/l0YyKlY9.js";import{s as D}from"../chunks/B1NwtjCx.js";import{p as R,a as V,i as N,s as W}from"../chunks/DYxqfdHp.js";import{S as X,e as Y,i as Z}from"../chunks/B3sBh0BJ.js";import{i as aa}from"../chunks/CQbDCWo8.js";import{w as ea}from"../chunks/BDI4V7ai.js";import{s as sa}from"../chunks/nwA2n0Es.js";import{C as ta}from"../chunks/DxCLeJBx.js";const ra=()=>{const t=sa;return{page:{subscribe:t.page.subscribe},navigating:{subscribe:t.navigating.subscribe},updated:t.updated}},ia={subscribe(t){return ra().page.subscribe(t)}};var oa=y('<p class="error"> </p>'),ca=y("<h2>Loading...</h2>"),la=y('<div class="set-details svelte-v1y222"><div class="head svelte-v1y222"><a href="/sets/"><img src="/images/logo.png" alt="Digimon Card Game"></a></div> <div class="title svelte-v1y222"><h1></h1></div> <!> <h2> </h2> <div class="card-grid svelte-v1y222"></div></div>');function ba(t,f){var x;H(f,!1);const[O,$]=W(),p=()=>V(ia,"$page",O);let F=R(f,"data",8),i=b(((x=F())==null?void 0:x.cards)||[]),c=b(null),g=b(!1),T=p().params.query;s(i).length<1&&r(c,"404 NOT FOUND");const k=ea(new Map);async function L(e){r(g,!0);try{const a=await fetch(`http://digimoncard.io/api-public/search.php?n=${e}`);if(!a.ok)throw new Error("Failed to fetch");r(i,await a.json()),r(c,s(i).length<1?"404 NOT FOUND":null)}catch(a){r(c,a.message),r(i,[])}finally{r(g,!1)}}I(()=>p(),()=>{p().params.query&&L(p().params.query)}),J(),aa();var w=B(),U=K(w);{var j=e=>{var a=oa(),h=d(a,!0);n(a),q(()=>D(h,s(c))),v(e,a)},z=(e,a)=>{{var h=o=>{var l=ca();v(o,l)},A=o=>{var l=la(),u=m(d(l),2),E=d(u);E.textContent=`Search ${T??""}`,n(u);var C=m(u,2);X(C,{searchTypes:["name","card_no"],placeholder:"Search Cards"});var _=m(C,2),G=d(_);n(_);var S=m(_,2);Y(S,5,()=>s(i),Z,(M,Q)=>{ta(M,{get card(){return s(Q)},activeStates:k})}),n(S),n(l),q(()=>D(G,`Cards in this set (${s(i).length??""})`)),v(o,l)};N(e,o=>{s(g)?o(h):o(A,!1)},a)}};N(U,e=>{s(c)?e(j):e(z,!1)})}v(t,w),P(),$()}export{ba as component};
